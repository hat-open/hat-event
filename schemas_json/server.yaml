---
"$schema": "http://json-schema.org/schema#"
id: "hat-event://server.yaml#"
title: Event Server
description: Event Server's configuration
type: object
required:
    - server_id
    - server_token
    - backend
    - modules
    - eventer_server
properties:
    type:
        const: event
        description: configuration type identification
    version:
        type: string
        description: component version
    server_id:
        type: integer
        description: server identifier
    server_token:
        type:
            - string
            - 'null'
        description: server token
    log:
        "$ref": "hat-json://logging.yaml#"
    backend:
        "$ref": "hat-event://server.yaml#/definitions/backend"
    modules:
        type: array
        items:
            "$ref": "hat-event://server.yaml#/definitions/module"
    eventer_server:
        type: object
        required:
            - host
            - port
        properties:
            host:
                type: string
                default: "127.0.0.1"
            port:
                type: integer
                default: 23012
    monitor_component:
        type: object
        required:
            - host
            - port
            - name
            - group
        properties:
            host:
                type: string
                default: "127.0.0.1"
            port:
                type: integer
                default: 23010
            name:
                type: string
            group:
                type: string
    synced_restart_engine:
        type: boolean
definitions:
    backend:
        type: object
        description: |
            structure of backend configuration depends on backend type
        required:
            - module
        properties:
            module:
                type: string
                description: full python module name that implements backend
    module:
        type: object
        description: |
            structure of module configuration depends on module type
        required:
            - module
        properties:
            module:
                type: string
                description: full python module name that implements module
...
