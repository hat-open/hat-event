<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="search" title="Search" href="search.html"><link rel="next" title="Event Server" href="server.html"><link rel="prev" title="Event" href="event.html">

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.09.25 -->
        <title>Eventer - hat-event documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="_static/hat.css?v=d90f72ce" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">hat-event  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <span class="sidebar-brand-text">hat-event  documentation</span>
  
</a><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="event.html">Event</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Eventer</a></li>
<li class="toctree-l1"><a class="reference internal" href="server.html">Event Server</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="backends/index.html">Backends</a><input aria-label="Toggle navigation of Backends" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="backends/dummy.html">Dummy backend</a></li>
<li class="toctree-l2"><a class="reference internal" href="backends/lmdb.html">LMDB Backend</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules/index.html">Modules</a></li>
</ul>

</div></div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          

<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="eventer">
<span id="id1"></span><h1>Eventer<a class="headerlink" href="#eventer" title="Link to this heading">¶</a></h1>
<p>Eventer communication protocol enables communication between Eventer Server and
Eventer Client (in the remainder of this document, mostly referred only as
<cite>server</cite> and <cite>client</cite>). It is based on <a class="reference external" href="https://hat-chatter.hat-open.com/chatter.html">Chatter</a> communication, defined in
<cite>HatEventer</cite> SBS module (see <a class="reference internal" href="#chatter-messages">Chatter messages</a>) with the following messages:</p>
<blockquote>
<div><div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head" rowspan="2"><p>Message</p></th>
<th class="head" colspan="3"><p>Conversation</p></th>
<th class="head" rowspan="2"><p>Direction</p></th>
</tr>
<tr class="row-even"><th class="head"><p>First</p></th>
<th class="head"><p>Last</p></th>
<th class="head"><p>Token</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>MsgInitReq</p></td>
<td><p>T</p></td>
<td><p>F</p></td>
<td><p>T</p></td>
<td><p>c &gt; s</p></td>
</tr>
<tr class="row-even"><td><p>MsgInitRes</p></td>
<td><p>F</p></td>
<td><p>T</p></td>
<td><p>T</p></td>
<td><p>s &gt; c</p></td>
</tr>
<tr class="row-odd"><td><p>MsgStatusNotify</p></td>
<td><p>T</p></td>
<td><p>T</p></td>
<td><p>T</p></td>
<td><p>s &gt; c</p></td>
</tr>
<tr class="row-even"><td><p>MsgEventsNotify</p></td>
<td><p>T</p></td>
<td><p>T/F</p></td>
<td><p>T</p></td>
<td><p>s &gt; c</p></td>
</tr>
<tr class="row-odd"><td><p>MsgEventsAck</p></td>
<td><p>F</p></td>
<td><p>T</p></td>
<td><p>T</p></td>
<td><p>c &gt; s</p></td>
</tr>
<tr class="row-even"><td><p>MsgRegisterReq</p></td>
<td><p>T</p></td>
<td><p>T/F</p></td>
<td><p>T</p></td>
<td><p>c &gt; s</p></td>
</tr>
<tr class="row-odd"><td><p>MsgRegisterRes</p></td>
<td><p>F</p></td>
<td><p>T</p></td>
<td><p>T</p></td>
<td><p>s &gt; c</p></td>
</tr>
<tr class="row-even"><td><p>MsgQueryReq</p></td>
<td><p>T</p></td>
<td><p>F</p></td>
<td><p>T</p></td>
<td><p>c &gt; s</p></td>
</tr>
<tr class="row-odd"><td><p>MsgQueryRes</p></td>
<td><p>F</p></td>
<td><p>T</p></td>
<td><p>T</p></td>
<td><p>s &gt; c</p></td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
<section id="initialization">
<h2>Initialization<a class="headerlink" href="#initialization" title="Link to this heading">¶</a></h2>
<p>Immediately after chatter connection is established, client must send
<cite>MsgInitReq</cite> message. This message contains:</p>
<ul>
<li><p>client name</p>
<p>Label used as client identification. By convention, client name is usually
formatted as <code class="docutils literal notranslate"><span class="pre">&lt;type&gt;/&lt;name&gt;</span></code> where <cite>&lt;type&gt;</cite> represents component
type and <cite>&lt;name&gt;</cite> represents component instance name. Both component type
and instance name can contain <code class="docutils literal notranslate"><span class="pre">/</span></code> as additional segment delimiter.</p>
</li>
<li><p>client token</p>
<p>Optional client token. Additional client identification which can be used
for authentication or state synchronization between client and server.</p>
</li>
<li><p>subscriptions</p>
<p>List of event types (including query subtypes) which is used as filter
for future event notifications. Only events with types satisfying
subscriptions will be notified to client.</p>
</li>
<li><p>server id</p>
<p>Optional identification of server used for filtering of notified events.
Only events originating from specified server will be notified to client.
If server id is not specified, all events (that satisfy subscription) are
notified to client.</p>
</li>
<li><p>persisted</p>
<p>Flag indicating when should server send event notifications to client.
If this property is <code class="docutils literal notranslate"><span class="pre">true</span></code>, server should send notifications after
events are persisted. If this property is <code class="docutils literal notranslate"><span class="pre">false</span></code>, server should send
notifications immediately after event registration.</p>
</li>
</ul>
<p>When server receives <cite>MsgInitReq</cite>, server responds with <cite>MsgInitRes</cite> message.
If server declines establishment of new connection, it will respond with
<code class="docutils literal notranslate"><span class="pre">error</span></code> response containing appropriate error description. In case of
successful connection establishment, server responds with <code class="docutils literal notranslate"><span class="pre">success</span></code>
message containing current server’s status. Eventer connection is considered
established only after <cite>MsgInitRes</cite> <code class="docutils literal notranslate"><span class="pre">success</span></code> is sent. In case of
<cite>MsgInitRes</cite> <code class="docutils literal notranslate"><span class="pre">error</span></code>, server should wait for client to receive message and
initiate closing of chatter connection (this waiting should be constrained
with timeout period after which server closes chatter connection regardless
of client behavior).</p>
<p>Initiation token recommendations for Event Server implementation:</p>
<ul class="simple">
<li><p>When server receives <cite>MsgInitReq</cite> without client token, it should
accept connection.</p></li>
<li><p>When server receives <cite>MsgInitReq</cite> with client token, it should compare
client token to server token specified by server configuration. Only if this
tokens match, connection should be accepted.</p></li>
</ul>
</section>
<section id="server-status">
<h2>Server status<a class="headerlink" href="#server-status" title="Link to this heading">¶</a></h2>
<p>Event Server execution status can be classified as <code class="docutils literal notranslate"><span class="pre">standby</span></code>, <code class="docutils literal notranslate"><span class="pre">starting</span></code>,
<code class="docutils literal notranslate"><span class="pre">operational</span></code> and <code class="docutils literal notranslate"><span class="pre">stopping</span></code>. Difference between these statuses doesn’t
impact Eventer communication. Only difference that client can expect is that
event registration while status is not <code class="docutils literal notranslate"><span class="pre">operational</span></code> will usually fail.</p>
<p>As part of successful Eventer connection establishment, server notifies it’s
current status to client. During Eventer communication, server can at any time
send <cite>MsgStatusNotify</cite> message and thus notify client of it’s status change.</p>
</section>
<section id="events-notification">
<h2>Events notification<a class="headerlink" href="#events-notification" title="Link to this heading">¶</a></h2>
<p>After Eventer connection is established, server can at any time send
<cite>MsgEventsNotify</cite> message. Events in single <cite>MsgEventsNotify</cite> contain only
events from same session (single session’s events should not be split into
multiple <cite>MsgEventsNotify</cite> messages). Before events are sent to specific
client, they are additionally filtered using properties negotiated during
client’s connection initialization.</p>
<p><cite>MsgEventsNotify</cite> can be sent with <cite>last</cite> flag set to <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>.
If client receives <cite>MsgEventsNotify</cite> with <cite>last</cite> set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, it should
respond with <code class="docutils literal notranslate"><span class="pre">MsgEventsAck</span></code> message.</p>
</section>
<section id="event-registration">
<h2>Event registration<a class="headerlink" href="#event-registration" title="Link to this heading">¶</a></h2>
<p>After Eventer connection is established, client can at any time send
<cite>MsgRegisterReq</cite> message, requesting event registration. When server
receives registration request, it should create new events. If
<cite>MsgRegisterReq</cite> is not marked as last message in chatter conversation,
server should send <cite>MsgRegisterRes</cite> message reporting registration status.
If event registration is successful, <cite>MsgRegisterRes</cite> will contain
newly created events associated with ones from register request
(association is based on event’s index in event list).</p>
</section>
<section id="event-querying">
<h2>Event querying<a class="headerlink" href="#event-querying" title="Link to this heading">¶</a></h2>
<p>After Eventer connection is established, client can at any time send
<cite>MsgQueryReq</cite> message. When server receives <cite>MsgQueryReq</cite>, it should respond
with <cite>MsgQueryRes</cite> message containing query results.</p>
<p>Supported query types:</p>
<ul>
<li><p>latest</p>
<p>Query single latest events of each specified event type. Latest event
is considered greatest event by event natural ordering (see
<a class="reference internal" href="event.html#event-ordering"><span class="std std-ref">Event ordering</span></a>). This query includes:</p>
<ul>
<li><p>event types</p>
<p>List of queried event types include wild-char subtypes (see
<a class="reference internal" href="event.html#event-type"><span class="std std-ref">Event type</span></a>). If this property is not set, all event types are
queried (same as <code class="docutils literal notranslate"><span class="pre">*</span></code>).</p>
</li>
</ul>
</li>
<li><p>timeseries</p>
<p>Query sequence of events ordered by timestamp or source timestamp.
If multiple events have same timestamp or source timestamp, event natural
ordering is used as secondary order (see <a class="reference internal" href="event.html#event-ordering"><span class="std std-ref">Event ordering</span></a>). This query
includes:</p>
<ul>
<li><p>event types</p>
<p>List of queried event types include wild-char subtypes (see
<a class="reference internal" href="event.html#event-type"><span class="std std-ref">Event type</span></a>). If this property is not set, all event types are
queried (same as <code class="docutils literal notranslate"><span class="pre">*</span></code>).</p>
</li>
<li><p>from timestamp</p>
<p>Inclusive lower limit for event timestamp (query events which have
timestamp greater or equal to specified value). If this property is not
set, lower limit is not set.</p>
</li>
<li><p>to timestamp</p>
<p>Inclusive upper limit for event timestamp (query events which have
timestamp less or equal to specified value). If this property is not
set, upper limit is not set.</p>
</li>
<li><p>from source timestamp</p>
<p>Inclusive lower limit for event source timestamp (query events which have
source timestamp greater or equal to specified value). If this property is
not set, lower limit is not set.</p>
</li>
<li><p>to source timestamp</p>
<p>Inclusive upper limit for event source timestamp (query events which have
source timestamp less or equal to specified value). If this property is not
set, upper limit is not set.</p>
</li>
<li><p>order</p>
<p>Property specifying choice between ascending or descending ordering.</p>
</li>
<li><p>order by</p>
<p>Property specifying which property is used as primary ordering value -
timestamp or source timestamp.</p>
</li>
<li><p>max results</p>
<p>Maximum number events in query result. This value is optionally defined by
client. Server should include it’s own restriction on maximum number of
resulting events (real maximum number of events could be smaller than one
requested by client).</p>
</li>
<li><p>last event id</p>
<p>Optional event identifier. If provided, this event is used as sentinel
value for discarding events from query result. When server filters and
orders events which should be included in query result, it should
sequentially discard events until event id with provided value occurs.
Once specified value is found, rest of events are reported as query result
with application of <cite>max results</cite> constraint. Event with specified last
event id is not part of query result. This property, together with
<cite>max results</cite>, enables client driven query pagination.</p>
</li>
</ul>
</li>
<li><p>server</p>
<p>Query events associated with specific <cite>server id</cite> in ascending natural
order (see <a class="reference internal" href="event.html#event-ordering"><span class="std std-ref">Event ordering</span></a>). This query includes:</p>
<ul>
<li><p>server id</p>
<p>Identification of server which registered queried events.</p>
</li>
<li><p>persisted</p>
<p>If this property is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, only events that are successfully
persisted are returned. Otherwise, all registered events are returned.</p>
</li>
<li><p>max results</p>
<p>Maximum number events in query result. This value is optionally defined by
client. Server should include it’s own restriction on maximum number of
resulting events (real maximum number of events could be smaller than one
requested by client).</p>
</li>
<li><p>last event id</p>
<p>Optional event identifier. If provided, only events greater by definition
of natural ordering are returned (see <a class="reference internal" href="event.html#event-ordering"><span class="std std-ref">Event ordering</span></a>). Event with
specified last event id is not part of query result. This property,
together with <cite>max results</cite>, enables client driven query pagination.</p>
</li>
</ul>
</li>
</ul>
<p>All queries result with:</p>
<ul>
<li><p>events</p>
<p>List of events satisfing query filters.</p>
</li>
<li><p>more follows</p>
<p>Flag indicating existence of more events that could be included as
part of query result but were omitted due to <cite>max results</cite> constraint.</p>
</li>
</ul>
</section>
<section id="implementation">
<h2>Implementation<a class="headerlink" href="#implementation" title="Link to this heading">¶</a></h2>
<p>Documentation is available as part of generated API reference:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="py_api/hat/event/eventer.html">Python hat.event.eventer module</a></p></li>
</ul>
</div></blockquote>
</section>
<section id="chatter-messages">
<h2>Chatter messages<a class="headerlink" href="#chatter-messages" title="Link to this heading">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>module HatEventer

MsgInitReq = Record {
    clientName:      String
    clientToken:     Optional(String)
    subscriptions:   Array(EventType)
    serverId:        Optional(Integer)
    persisted:       Boolean
}

MsgInitRes = Choice {
    success:  Status
    error:    String
}

MsgStatusNotify = Status

MsgEventsNotify = Array(Event)

MsgEventsAck = None

MsgRegisterReq = Array(RegisterEvent)

MsgRegisterRes = Choice {
    events:   Array(Event)
    failure:  None
}

MsgQueryReq = QueryParams

MsgQueryRes = QueryResult

Status = Choice {
    standby:      None
    starting:     None
    operational:  None
    stopping:     None
}

Timestamp = Record {
    s:   Integer
    us:  Integer
}

EventId = Record {
    server:    Integer
    session:   Integer
    instance:  Integer
}

Order = Choice {
    descending:  None
    ascending:   None
}

OrderBy = Choice {
    timestamp:        None
    sourceTimestamp:  None
}

EventType = Array(String)

EventPayload = Choice {
    binary:  EventPayloadBinary
    json:    EventPayloadJson
}

EventPayloadBinary = Record {
    type:  String
    data:  Bytes
}

EventPayloadJson = String

Event = Record {
    id:               EventId
    type:             EventType
    timestamp:        Timestamp
    sourceTimestamp:  Optional(Timestamp)
    payload:          Optional(EventPayload)
}

RegisterEvent = Record {
    type:             EventType
    sourceTimestamp:  Optional(Timestamp)
    payload:          Optional(EventPayload)
}

QueryParams = Choice {
    latest:      QueryLatestParams
    timeseries:  QueryTimeseriesParams
    server:      QueryServerParams
}

QueryLatestParams = Record {
    eventTypes:  Optional(Array(EventType))
}

QueryTimeseriesParams = Record {
    eventTypes:   Optional(Array(EventType))
    tFrom:        Optional(Timestamp)
    tTo:          Optional(Timestamp)
    sourceTFrom:  Optional(Timestamp)
    sourceTTo:    Optional(Timestamp)
    order:        Order
    orderBy:      OrderBy
    maxResults:   Optional(Integer)
    lastEventId:  Optional(EventId)
}

QueryServerParams = Record {
    serverId:     Integer
    persisted:    Boolean
    maxResults:   Optional(Integer)
    lastEventId:  Optional(EventId)
}

QueryResult = Record {
    events:       Array(Event)
    moreFollows:  Boolean
}
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="server.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Event Server</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="event.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Event</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2020-2025, Hat Open AUTHORS
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Eventer</a><ul>
<li><a class="reference internal" href="#initialization">Initialization</a></li>
<li><a class="reference internal" href="#server-status">Server status</a></li>
<li><a class="reference internal" href="#events-notification">Events notification</a></li>
<li><a class="reference internal" href="#event-registration">Event registration</a></li>
<li><a class="reference internal" href="#event-querying">Event querying</a></li>
<li><a class="reference internal" href="#implementation">Implementation</a></li>
<li><a class="reference internal" href="#chatter-messages">Chatter messages</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=46bd48cc"></script>
    </body>
</html>